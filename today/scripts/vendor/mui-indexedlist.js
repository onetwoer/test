!function(a,b,c){{var d=function(b){return"."+a.className(b)};a.IndexedList=a.Class.extend({init:function(a,b){var c=this;if(c.options=b||{},c.box=a,!c.box)throw"实例 IndexedList 时需要指定 element";c.createDom(),c.findElements(),c.caleLayout(),c.bindEvent()},createDom:function(){var a=this;a.el=a.el||{},a.el.styleForSearch=c.createElement("style"),(c.head||c.body).appendChild(a.el.styleForSearch)},findElements:function(){var a=this;a.el=a.el||{},a.el.search=a.box.querySelector(d("indexed-list-search")),a.el.searchInput=a.box.querySelector(d("indexed-list-search-input")),a.el.searchClear=a.box.querySelector(d("indexed-list-search")+" "+d("icon-clear")),a.el.bar=a.box.querySelector(d("indexed-list-bar")),a.el.barItems=[].slice.call(a.box.querySelectorAll(d("indexed-list-bar")+" a")),a.el.inner=a.box.querySelector(d("indexed-list-inner")),a.el.items=[].slice.call(a.box.querySelectorAll(d("indexed-list-item"))),a.el.liArray=[].slice.call(a.box.querySelectorAll(d("indexed-list-inner")+" li")),a.el.alert=a.box.querySelector(d("indexed-list-alert"))},caleLayout:function(){var a=this,b=a.box.offsetHeight-a.el.search.offsetHeight+"px";a.el.bar.style.height=b,a.el.inner.style.height=b;var c=(a.el.bar.offsetHeight-40)/a.el.barItems.length+"px";a.el.barItems.forEach(function(a){a.style.height=c,a.style.lineHeight=c})},scrollTo:function(a){var b=this,c=b.el.inner.querySelector('[data-group="'+a+'"]');!c||b.hiddenGroups&&b.hiddenGroups.indexOf(c)>-1||(b.el.inner.scrollTop=c.offsetTop)},bindBarEvent:function(){var a=this,b=null,d=function(d){b&&(b.classList.remove("active"),b=null),a.el.bar.classList.add("active");var e=d.changedTouches?d.changedTouches[0]:d;if(b=c.elementFromPoint(e.pageX,e.pageY)){var f=b.innerText;f&&1==f.length&&(b.classList.add("active"),a.el.alert.innerText=f,a.el.alert.classList.add("active"),a.scrollTo(f))}d.preventDefault()},e=function(){a.el.alert.classList.remove("active"),a.el.bar.classList.remove("active"),b&&(b.classList.remove("active"),b=null)};a.el.bar.addEventListener("touchmove",function(a){d(a)},!1),a.el.bar.addEventListener("touchstart",function(a){d(a)},!1),c.body.addEventListener("touchend",function(a){e(a)},!1),c.body.addEventListener("touchcancel",function(a){e(a)},!1)},search:function(b){var c=this;b=(b||"").toLowerCase();var e=[],f=-1,g=0,h=c.el.liArray,i=h.length;c.hiddenGroups=[];var j=function(a,b){g>=a-f-(b?0:1)&&(e.push(d("indexed-list-inner li")+":nth-child("+(f+1)+")"),c.hiddenGroups.push(h[f])),f=a,g=0};h.forEach(function(c){var f=h.indexOf(c);if(c.classList.contains(a.className("indexed-list-group")))j(f,!1);else{var k=(c.innerText||"").toLowerCase(),l=(c.getAttribute("data-value")||"").toLowerCase(),m=(c.getAttribute("data-tags")||"").toLowerCase();b&&k.indexOf(b)<0&&l.indexOf(b)<0&&m.indexOf(b)<0&&(e.push(d("indexed-list-inner li")+":nth-child("+(f+1)+")"),g++),f>=i-1&&j(f,!0)}}),e.length>=i?c.el.inner.classList.add("empty"):e.length>0?(c.el.inner.classList.remove("empty"),c.el.styleForSearch.innerText=e.join(", ")+"{display:none;}"):(c.el.inner.classList.remove("empty"),c.el.styleForSearch.innerText="")},bindSearchEvent:function(){var b=this;b.el.searchInput.addEventListener("input",function(){var a=this.value;b.search(a)},!1),a(b.el.search).on("tap",d("icon-clear"),function(){b.search("")},!1)},bindEvent:function(){var a=this;a.bindBarEvent(),a.bindSearchEvent()}})}}(mui,window,document);