define(["zepto"],function(){var a={},b="xy-";a.showMask=function(a){a=a||!1;var b=$(".xy-mask");0===b.size()&&($("body").append('<div class="xy-mask"></div>'),b=$(".xy-mask")),b.toggleClass("transparent",a),b.show(),"function"==typeof window.callback&&window.callback()},a.hideMask=function(){$(".xy-mask").remove(),"function"==typeof window.callback&&window.callback()};var c=null;return a.showToast=function(d){clearTimeout(c);var e={type:"success",time:2e3,callback:null};if(e=$.extend(e,d),e.message){"loading"===e.type&&(e.time=6e4);var f=$(".xy-toast");f.size()>0&&f.remove(),a.showMask(!0),f=$('<div class="xy-toast"><i class="icon"></i><p class="text">#text#</p></div>'.replace("#text#",e.message)).appendTo($("body")),f.addClass(b+e.type),f.show(),e.callback&&(c=setTimeout(function(){a.hideToast(),"function"==typeof e.callback&&e.callback()},e.time))}},a.hideToast=function(){$(".xy-toast").hide().remove(),a.hideMask()},a.showDialog=function(c){var d={title:"提醒：",type:"success",action:[{text:"确定","class":"mui-btn-success",callback:function(){a.hideDialog()}}],callback:null};if(d=$.extend(d,c),d.message){var e=$(".xy-dialog");e.size()>0&&e.remove(),a.showMask(),$toast=$('<div class="xy-dialog"><div class="dialog-hd">#title#</div><div class="dialog-bd">#text#</div><div class="dialog-ft"><ul class="action"></ul></div></div>'.replace("#title#",d.title).replace("#text#",d.message)).appendTo($("body"));var f=$toast.find(".dialog-ft .action");$.each(d.action,function(){var a=this,b=$('<li><a href="javascript:;" class="mui-btn #class#">#text#</a></li>'.replace("#class#",a["class"]).replace("#text#",a.text));f.append(b),b.bind("click",function(){a.callback()})}),$toast.addClass(b+d.type),$toast.show(),d.callback&&"function"==typeof d.callback&&d.callback()}},a.hideDialog=function(){$(".xy-dialog").hide().remove(),a.hideMask()},window.popup=a,a});