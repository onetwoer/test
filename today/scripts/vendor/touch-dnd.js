!function(a){function b(a,b,c){f("transform",a,"translate("+b+"px, "+c+"px)")}function c(a,b){f("transition",a,b)}function d(a){return a=a.originalEvent||a,window.event&&window.event.changedTouches&&event.changedTouches[0].pageX||a.pageX}function e(a){return a=a.originalEvent||a,window.event&&window.event.changedTouches&&event.changedTouches[0].pageY||a.pageY}function f(a,b,c){a=a.toLowerCase();for(var d=a.charAt(0).toUpperCase()+a.substr(1),e=["webkit","Moz","ms","O"],f=e.map(function(a){return a+d}).concat("transform"),g=0,h=f.length;h>g;++g)if(f[g]in b.style){if(void 0===c)return b.style[f[g]];b.style[f[g]]=c;break}}function g(a,b,c,d){if(a[0]){c=c.originalEvent||c;var e={};n.forEach(function(a){e[a]=c[a]}),e.currentTarget=e.target=a[0];var f=a[0].ownerDocument.defaultView||a[0].ownerDocument.parentWindow,g=f.$.Event(b,e);return f.$(a[0]).trigger(g,d),g}}function h(a,b){var c=a.matches||a.matchesSelector||a.msMatchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.oMatchesSelector;return c?c.call(a,b):!1}function i(a){return Array.prototype.slice.call(a)}function j(b,c,d){return function(e,f,g){var h=[];return this.each(function(){var i=a(this).data(c);if("string"==typeof e){if("undefined"==typeof i)throw new Error(c+" not defined");switch(e){case"enable":i.enable();break;case"disable":i.disable();break;case"destroy":i.destroy(),a(this).removeData(c);break;case"option":void 0!==g?i.opts[f]=g:"object"==typeof f?i.opts=a.extend(i.opts,f):h.push(f?i.opts[f]:i.opts);break;case"toArray":if("sortable"!==c)return;h.push(i.toArray(f))}}else{if(i)return a.extend(i.opts,e),this;i=new b(a(this),a.extend({},d,e)),i.create(),a(this).data(c,i)}}),h.length?1===h.length?h[0]:h:this}}var k="mousedown touchstart MSPointerDown pointerdown",l="mouseup touchend MSPointerUp pointerup",m="mousemove touchmove MSPointerMove pointermove scroll",n=["altKey","bubbles","button","cancelable","charCode","clientX","clientY","ctrlKey","currentTarget","data","detail","eventPhase","metaKey","offsetX","offsetY","originalTarget","pageX","pageY","relatedTarget","screenX","screenY","shiftKey","target","view","which"],o=0,p=function(){this.eventHandler=a("<div />"),this.parent=this.el=this.handle=null,this.origin={x:0,y:0,transition:null,translate:null,offset:{x:0,y:0}},this.lastEntered=this.currentTarget=null,this.lastX=this.lastY=this.lastDirection=null,this.originalCss={},this.windows=[window];var b;Object.defineProperty(this,"placeholder",{get:function(){return b},set:function(a){b!==a&&(b&&b.remove(),b=a)}})};p.prototype.on=function(){return this.eventHandler.on.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},p.prototype.off=function(){return this.eventHandler.off.apply(this.eventHandler,Array.prototype.slice.call(arguments)),this},p.prototype.start=function(b,h,i,j){this.parent=b,this.el=h,this.handle=j;var h=this.handle||this.el;this.origin.x=d(i),this.origin.y=e(i),this.origin.transform=f("transform",this.el[0]),this.origin.transition=f("transition",this.el[0]);var k=this.el[0].getBoundingClientRect();return this.origin.offset.x=k.left+(window.scrollX||window.pageXOffset)-this.origin.x,this.origin.offset.y=k.top+(window.scrollY||window.pageYOffset)-this.origin.y,this.origin.scrollX=window.scrollX||window.pageXOffset,this.origin.scrollY=window.scrollY||window.pageYOffset,h[0].style.pointerEvents="none",this.windows.forEach(function(b){a(b).on(m,a.proxy(this.move,this)),a(b).on(l,a.proxy(this.stop,this))},this),c(h[0],""),g(this.eventHandler,"dragging:start",i),this.el},p.prototype.stop=function(b){var d=null,e=!0;if(this.last){var h=this.last;this.last=null,d=g(a(h),"dragging:drop",b),e=!d.isDefaultPrevented()}if(this.el){for(var i in this.originalCss)this.el.css(i,this.originalCss[i]),delete this.originalCss[i];g(this.eventHandler,"dragging:stop",b),this.placeholder=null,this.handle||this.adjustPlacement(b);var j=this.el;this.handle&&this.handle.remove(),setTimeout(function(a,b){c(a[0],"all 0.25s ease-in-out 0s"),f("transform",a[0],b.transform||""),setTimeout(c.bind(null,a[0],b.transition||""),250),a[0].style.pointerEvents=""}.bind(null,j,this.origin)),this.windows.forEach(function(b){a(b).off(m,this.move),a(b).off(l,this.stop)},this),this.parent=this.el=this.handle=null}},p.prototype.move=function(c){if(this.el){var f=this.el[0].ownerDocument,h=f.defaultView||f.parentWindow;if("scroll"!==c.type){var i=d(c),j=e(c);c.view!==h&&c.view.frameElement&&(i+=c.view.frameElement.offsetLeft,j+=c.view.frameElement.offsetTop);var k,l=c.clientX||c.originalEvent&&c.originalEvent.clientX||window.event&&window.event.touches&&window.event.touches[0].clientX||0,m=c.clientY||c.originalEvent&&c.originalEvent.clientY||window.event&&window.event.touches&&window.event.touches[0].clientY||0,f=this.el[0].ownerDocument;t?(k=c.view.document.msElementsFromPoint(l,m),k=k[0]===this.el[0]?k[1]:k[0]):k=c.view.document.elementFromPoint(l,m);var n=this.lastX-i,o=this.lastY-j,p=o>0&&"up"||0>o&&"down"||n>0&&"up"||0>n&&"down"||this.lastDirection;q.currentTarget||this.setCurrent(k),this.currentTarget&&(k!==this.last&&this.lastEntered!==this.currentTarget?(g(a(this.lastEntered),"dragging:leave",c),g(a(this.currentTarget),"dragging:enter",c),this.lastEntered=this.currentTarget):p!==this.lastDirection&&g(a(this.currentTarget),"dragging:diverted",c)),this.last=k,this.currentTarget=null,this.lastDirection=p,this.lastX=i,this.lastY=j,this.origin.scrollX=window.scrollX||window.pageXOffset,this.origin.scrollY=window.scrollY||window.pageYOffset}else var i=this.lastX+((window.scrollX||window.pageXOffset)-this.origin.scrollX),j=this.lastY+((window.scrollY||window.pageYOffset)-this.origin.scrollY);if(c.view!==h&&c.view&&c.view.frameElement){var r=-1*(j-(window.scrollY||window.pageYOffset)-window.innerHeight),s=document.documentElement.offsetHeight<(window.scrollY||window.pageYOffset)+window.innerHeight;10>=r&&!s&&setTimeout(function(){window.scrollBy(0,5)},50);var u=j-(window.scrollY||window.pageYOffset),v=(window.scrollY||window.pageYOffset)<=0;10>=u&&!v&&setTimeout(function(){window.scrollBy(0,-5)},50)}var n=i-this.origin.x,o=j-this.origin.y,w=this.handle||this.el;b(w[0],n,o)}},p.prototype.setCurrent=function(a){this.currentTarget=a},p.prototype.css=function(a,b){this.el&&(this.originalCss[a]=this.el.css(a),this.el.css(a,b))},p.prototype.adjustPlacement=function(a){var c=this.handle&&this.handle[0]||this.el[0];b(c,0,0);var f=c.getBoundingClientRect();this.origin.x=f.left+(window.scrollX||window.pageXOffset)-this.origin.offset.x,this.origin.y=f.top+(window.scrollY||window.pageYOffset)-this.origin.offset.y;var g=d(a)||this.lastX,h=e(a)||this.lastY,i=g-this.origin.x,j=h-this.origin.y;b(c,i,j)};var q;try{parent.$&&parent.$.dragging&&(q=parent.$.dragging,q.windows.push(window))}catch(r){}q=a.dragging=q||new p;var s=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,t=!1;"undefined"==typeof s&&(s=function(a){this.targets=[],this.onAdded=function(b){a([{addedNodes:[b.target],removedNodes:[]}])},this.onRemoved=function(b){a([{addedNodes:[],removedNodes:[b.target]}])}},s.prototype.observe=function(a){a.addEventListener("DOMNodeInserted",this.onAdded),a.addEventListener("DOMNodeRemoved",this.onRemoved),this.targets.push(a)},s.prototype.disconnect=function(){for(var a;a=this.targets.shift();)a.removeEventListener("DOMNodeInserted",this.onAdded),a.removeEventListener("DOMNodeRemoved",this.onRemoved)},t=!!~navigator.appName.indexOf("Internet Explorer"));var u=function(a,b,c,d){function e(a,c){var d=[];return i(a).forEach(function(a){1===a.nodeType&&(k&&-1===j.targets.indexOf(a.parentNode)||(h(a,l)&&d.push(a),!k&&c&&i(a.querySelectorAll(b)).forEach(function(a){d.push(a)})))}),d}function f(a,b,c){c&&e(a,b).filter(function(a,b,c){return c.indexOf(a)===b}).forEach(function(a){c.call(a)})}function g(){j.disconnect();for(var a=0,b=p.length;b>a;++a){var e=o.indexOf(p[a]);e>-1&&(o.splice(e,1),p.splice(a--,1))}f(o,!(m&&t),c),f(p,!0,d),o.length=0,p.length=0,j.observe()}var j=this;this.targets=a instanceof NodeList?Array.prototype.slice.call(a):[a];var k=">"===b[0],l=k?b.substr(1):b,m=!1,n=null,o=[],p=[];this.observer=new s(function(a){a.forEach(function(a){o.push.apply(o,a.addedNodes),p.push.apply(p,a.removedNodes)}),n&&clearTimeout(n),n=setTimeout(g)}),c&&this.targets.forEach(function(a){f(a.children,!0,c)}),m=!0,this.observe()};u.prototype.disconnect=function(){this.observer.disconnect()},u.prototype.observe=function(){var a=this;this.targets.forEach(function(b){a.observer.observe(b,{childList:!0,subtree:!0})})};var v=function(b,c){this.id=o++,this.el=a(b),this.opts=c,this.cancel=c.handle!==!1};v.prototype.create=function(){this.el.on(k,a.proxy(this.start,this)).css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),q.on("dragging:stop",a.proxy(this.reset,this));var b=this;setTimeout(function(){b.el.trigger("draggable:create",b)})},v.prototype.destroy=function(){this.el.off(k,this.start),q.off("dragging:stop",this.reset)},v.prototype.enable=function(){this.opts.disabled=!1},v.prototype.disable=function(){this.opts.disabled=!0},v.prototype.start=function(b){if(this.opts.disabled)return!1;if("mousedown"===b.type&&1!==b.which)return!1;if(b=b.originalEvent||b,this.opts.cancel)for(var c=a(b.target);c[0]!==this.el[0];){if(c.is(this.opts.cancel))return;c=c.parent()}if(this.opts.handle){for(var c=a(b.target),d=!1;c[0]!==this.el[0];){if(c.is(this.opts.handle)){d=!0;break}c=c.parent()}if(!d)return}b.preventDefault();{var e;this.el}if(this.opts.clone){"function"==typeof this.opts.clone?e=this.opts.clone.call(this.el):(e=this.el.clone(),this.opts.cloneClass&&e.addClass(this.opts.cloneClass));var f=this.el.position();e.css("position","absolute").css("left",f.left).css("top",f.top).width(this.el.width()).height(this.el.height()),e.insertAfter(this.el)}q.start(this,this.el,b,e),g(this.el,"draggable:start",b,{item:q.el})},v.prototype.reset=function(a){g(this.el,"draggable:stop",a,{item:q.el})};var w=function(b,c){this.id=o++,this.el=a(b),this.opts=c,this.accept=!1};w.prototype.create=function(){this.el.on("dragging:enter",a.proxy(this.enter,this)).on("dragging:leave",a.proxy(this.leave,this)).on("dragging:drop",a.proxy(this.drop,this)),q.on("dragging:start",a.proxy(this.activate,this)).on("dragging:stop",a.proxy(this.reset,this));var b=this;setTimeout(function(){b.el.trigger("droppable:create",b)})},w.prototype.destroy=function(){this.el.off("dragging:enter",this.enter).off("dragging:leave",this.leave).off("dragging:drop",this.drop)},w.prototype.enable=function(){this.opts.disabled=!1},w.prototype.disable=function(){this.opts.disabled=!0},w.prototype.activate=function(a){if(this.accept=q.parent.opts.connectWith&&this.el.is(q.parent.opts.connectWith),!this.accept){var b="*"===this.opts.accept||("function"==typeof this.opts.accept?this.opts.accept.call(this.el[0],q.el):q.el.is(this.opts.accept));"default"!==this.opts.scope?(this.accept=q.parent.opts.scope===this.opts.scope,this.accept||"*"===this.opts.accept||(this.accept=b)):this.accept=b}this.accept&&(this.opts.activeClass&&this.el.addClass(this.opts.activeClass),g(this.el,"droppable:activate",a,{item:q.el}))},w.prototype.reset=function(a){this.accept&&(this.opts.activeClass&&this.el.removeClass(this.opts.activeClass),this.opts.hoverClass&&this.el.removeClass(this.opts.hoverClass),g(this.el,"droppable:deactivate",a,{item:q.el}))},w.prototype.enter=function(a){return this.opts.disabled?!1:(a.stopPropagation(),q.placeholder&&q.placeholder.hide(),void(this.accept&&(this.opts.hoverClass&&this.el.addClass(this.opts.hoverClass),g(this.el,"droppable:over",a,{item:q.el}))))},w.prototype.leave=function(a){return this.opts.disabled?!1:(this.opts.hoverClass&&this.accept&&this.el.removeClass(this.opts.hoverClass),void g(this.el,"droppable:out",a,{item:q.el}))},w.prototype.drop=function(b){if(this.opts.disabled||!this.accept)return!1;if(q.el){var c=q.el,d="function"==typeof d&&this.opts.receiveHandler,e={item:c},f=null;q.handle&&(e.helper=q.handle,d||(f=e.clone=q.el.clone()));var h=g(this.el,"droppable:drop",b,e);h.isDefaultPrevented()||(d?d.call(this.el,e):a(this.el).append(f||q.el))}};var x=function(b,c){this.id=o++,this.el=b,this.opts=c;var d=this.opts.placeholderTag;if(!d)try{d=this.el.find(this.opts.items)[0].tagName}catch(e){d=/^ul|ol$/i.test(this.el[0].tagName)?"li":"div"}this.placeholder=a("<"+d+' id="__ph'+this.id+'" class="'+this.opts.placeholder+'" />'),this.accept=this.index=this.direction=null};x.prototype.create=function(){this.el.on(k,this.opts.items,a.proxy(this.start,this)).on("dragging:enter",this.opts.items,a.proxy(this.enter,this)).on("dragging:diverted",this.opts.items,a.proxy(this.diverted,this)).on("dragging:drop",this.opts.items,a.proxy(this.drop,this)),a(this.el).find(this.opts.items).css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),this.el.on("dragging:enter",a.proxy(this.enter,this)).on("dragging:diverted",a.proxy(this.diverted,this)).on("dragging:drop",a.proxy(this.drop,this)),q.on("dragging:start",a.proxy(this.activate,this)).on("dragging:stop",a.proxy(this.reset,this));var b=this;setTimeout(function(){b.el.trigger("sortable:create",b)}),this.observer=new u(this.el[0],this.opts.items,function(){},function(){if(!(this===b.placeholder[0]||q.el&&this===q.el[0])){var c=a(this);c.css("touch-action","double-tap-zoom").css("-ms-touch-action","double-tap-zoom"),b.el.trigger("sortable:change",{item:c}),b.el.trigger("sortable:update",{item:c,index:-1})}})},x.prototype.destroy=function(){this.el.off(k,this.opts.items,this.start).off("dragging:enter",this.opts.items,this.enter).off("dragging:diverted",this.opts.items,this.diverted).off("dragging:drop",this.opts.items,this.drop),this.el.off("dragging:enter",this.enter).off("dragging:diverted",this.diverted).off("dragging:drop",this.drop),this.observer.disconnect()},x.prototype.enable=function(){this.opts.disabled=!1},x.prototype.disable=function(){this.opts.disabled=!0},x.prototype.activate=function(a){this.isEmpty=0===this.el.find(this.opts.items).length,this.accept=q.parent.id===this.id,!this.accept&&q.parent.opts.connectWith&&(this.accept=this.el.is(q.parent.opts.connectWith)),this.accept&&(this.accept=q.parent.id===this.id||"*"===this.opts.accept||("function"==typeof this.opts.accept?this.opts.accept.call(this.el[0],q.el):q.el.is(this.opts.accept)),this.accept&&(this.opts.activeClass&&this.el.addClass(this.opts.activeClass),g(this.el,"sortable:activate",a,{item:q.el})))},x.prototype.reset=function(a){this.accept&&(this.opts.activeClass&&this.el.removeClass(this.opts.activeClass),g(this.el,"sortable:deactivate",a,{item:q.el}),null!==this.index&&(g(this.el,"sortable:beforeStop",a,{item:q.el}),g(this.el,"sortable:stop",a,{item:q.el}),this.index=null))},x.prototype.indexOf=function(a){return this.el.find(this.opts.items+", #"+this.placeholder.attr("id")).index(a)},x.prototype.start=function(b){if(!this.opts.disabled&&!q.el){if("mousedown"===b.type&&1!==b.which)return!1;if(this.opts.cancel)for(var c=a(b.target);c[0]!==this.el[0];){if(c.is(this.opts.cancel))return;c=c.parent()}if(this.opts.handle){for(var c=a(b.target),d=!1;c[0]!==this.el[0];){if(c.is(this.opts.handle)){d=!0;break}c=c.parent()}if(!d)return}if(b.stopPropagation(),b.preventDefault(),q.start(this,a(b.currentTarget),b),this.index=this.indexOf(q.el),q.el.before(q.placeholder=this.placeholder.show()),null!==this.index){var e=q.el.outerHeight?q.el.outerHeight():q.el.height();q.css("margin-bottom",-e)}this.opts.forcePlaceholderSize&&(this.placeholder.height(parseFloat(q.el.css("height"))),this.placeholder.width(parseFloat(q.el.css("width")))),q.adjustPlacement(b),g(this.el,"sortable:start",b,{item:q.el})}},x.prototype.enter=function(b){if(this.accept&&!this.opts.disabled){b.stopPropagation();var c=b.currentTarget,d=c===this.el[0];c!==this.placeholder[0]&&(c=a(c),d&&!this.isEmpty&&this.placeholder.parent().length||(q.placeholder=this.placeholder,this.opts.forcePlaceholderSize&&(this.placeholder.height(parseFloat(q.el.css("height"))),this.placeholder.width(parseFloat(q.el.css("width")))),d?(this.el.append(this.placeholder),this.el.trigger("sortable:change",{item:q.el})):this.diverted(b)))}},x.prototype.diverted=function(b){if(this.accept&&!this.opts.disabled){b.stopPropagation();var c=a(b.currentTarget),d=c[0]===this.el[0];d||(q.placeholder=this.placeholder,this.direction=this.indexOf(this.placeholder.show())<this.indexOf(c)?"down":"up",c["down"===this.direction?"after":"before"](this.placeholder),q.adjustPlacement(b),this.el.trigger("sortable:change",{item:q.el}))}},x.prototype.drop=function(a){if(this.accept&&!this.opts.disabled&&(a.stopPropagation(),a.preventDefault(),q.el&&this.placeholder.parent().length)){g(this.el,"sortable:beforeStop",a,{item:q.el}),this.observer.disconnect();var b=this.indexOf(this.placeholder);b>this.index&&b--;var c;c=null===this.index?this.opts.receiveHandler:this.opts.updateHandler||this.opts.updatePosition;var d=q.el;"function"==typeof c?c.call(this.el,{item:q.el,index:b}):(q.handle&&(d=q.el.clone()),d.insertBefore(this.placeholder)),null===this.index&&g(this.el,"sortable:receive",a,{item:d}),b!==this.index&&this.el.trigger("sortable:update",{item:d,index:b}),g(this.el,"sortable:stop",a,{item:d}),this.index=null,this.observer.observe(),q.stop(a)}},x.prototype.toArray=function(b){b||(b={});var c=b.attribute||"id",d=[];return this.el.find(this.opts.items).each(function(){d.push(a(this).prop(c))}),d},a.fn.draggable=j(v,"draggable",{cancel:"input, textarea, button, select, option",connectWith:!1,cursor:"auto",disabled:!1,handle:!1,initialized:!1,clone:!1,cloneClass:"",scope:"default"}),a.fn.droppable=j(w,"droppable",{accept:"*",activeClass:"",disabled:!1,hoverClass:"",initialized:!1,scope:"default",receiveHandler:null}),a.fn.sortable=j(x,"sortable",{accept:"*",activeClass:"",cancel:"input, textarea, button, select, option",connectWith:!1,disabled:!1,forcePlaceholderSize:!1,handle:!1,initialized:!1,items:"li, div",placeholder:"placeholder",placeholderTag:null,updateHandler:null,receiveHandler:null})}(window.Zepto||window.jQuery);