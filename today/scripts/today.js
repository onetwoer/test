!function(){function a(){b(),$(".gold-grid li.activate .icon-gold").draggable({}).on("draggable:start",function(a){var b=$(a.target),c=b.closest("li"),d=c.find(".copy");0===d.size()&&(d=b.clone().addClass("copy")),d.appendTo(b.closest("li"))}).on("draggable:stop",function(a,b){var c=$(b.item),d=c.closest("li");d.is("[data-index]")&&d.find(".copy").remove()});var a=$(".task-list li");a.droppable({}).on("droppable:drop",function(a,c){var d=$(c.item),e=$(a.target).closest("li");if(e.closest(".task-list.finished").size()>0)return!1;var f=!0,g=$(c.item).closest("li.activate");if(0===g.size()&&(f=!1),!f)return!1;e.find(".gold-list").append("<dd></dd>");var h=e.find(".gold-list dd").last(),i=d.clone();setTimeout(function(){i.removeAttr("style data-draggable").appendTo(h),d.appendTo(g),f?g.addClass("used"):g.remove(),b()},10)})}function b(){$(".task-list .gold-list .icon-gold").draggable({}),$(".gold-grid").droppable({}).on("droppable:drop",function(a,b){var c=$(b.item),d=c.closest("dd"),e=$(".gold-grid li.activate");if(c.closest("li[data-index]").size()>0)return!1;var f=c.attr("data-index"),g=e.attr("data-index");return f!==g?!1:void setTimeout(function(){e.removeClass("used").find(".copy").remove(),d.remove(),c.remove()},10)})}function c(){var b=$(".gold-grid li").addClass("activate"),c=new Date,e=c.getHours(),f=c.getMinutes(),g=2*(e-7);f>=30&&g++,b.not(".used").filter(function(){return $(this).index()<g}).addClass("expire").removeClass("activate"),b.filter(function(){return $(this).index()>g}).addClass("nonactivated").removeClass("activate");var h=b.filter(".activate").last().index();h!=d&&(d=h,a())}$(".gold-grid li").each(function(a){$(this).attr("data-index",+a),$(this).find(".icon-gold").attr("data-index",+a)}),$(document).on("tap",".task-list li .checkbox",function(){var a=$(this),b=a.closest("li");a.toggleClass("checked");var c=a.closest(".task-list").is(".finished"),d=$(c?".task-list.unfinished":".task-list.finished");b.animate({opacity:.1},200,function(){b.appendTo(d).css("opacity","1")})});var d=-1;c(),setInterval(c,1e4)}();